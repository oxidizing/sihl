<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Core_app (sihl.Sihl__.Core_app)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">sihl</a> &#x00BB; <a href="../index.html">Sihl__</a> &#x00BB; Core_app</nav><h1>Module <code>Sihl__.Core_app</code></h1></header><aside><p>A module to create Sihl apps.</p></aside><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>An app is a thin convenience layer on top of the service container. It provides hooks that are executed at different stages in the app lifecycle.</p></dd></dl><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : <a href="index.html#type-t">t</a></code></dt><dd><p><code>empty</code> returns an app without any services.</p></dd></dl><dl><dt class="spec value" id="val-with_services"><a href="#val-with_services" class="anchor"></a><code><span class="keyword">val</span> with_services : <span><a href="../Core_service/index.html#type-t">Sihl__.Core_container.Service.t</a> list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>with_services services app</code> adds <code>services</code> to an <code>app</code>.</p></dd></dl><dl><dt class="spec value" id="val-before_start"><a href="#val-before_start" class="anchor"></a><code><span class="keyword">val</span> before_start : <span>(unit <span>&#45;&gt;</span> <span>unit Lwt.t</span>)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>before_start f app</code> registers a callback f with <code>app</code>. The callback is executed before any service is started. This means you must not use any services here!</p></dd></dl><dl><dt class="spec value" id="val-after_stop"><a href="#val-after_stop" class="anchor"></a><code><span class="keyword">val</span> after_stop : <span>(unit <span>&#45;&gt;</span> <span>unit Lwt.t</span>)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>after_stop f app</code> registers a callback f with <code>app</code>. The callback is executed before after services are stopped. This means you must not use any services here!</p></dd></dl><dl><dt class="spec value" id="val-run"><a href="#val-run" class="anchor"></a><code><span class="keyword">val</span> run : <span>?&#8288;commands:<span><a href="../Core_command/index.html#type-t">Sihl__.Core_command.t</a> list</span></span> <span>&#45;&gt;</span> <span>?&#8288;log_reporter:Logs.reporter</span> <span>&#45;&gt;</span> <span>?&#8288;args:<span>string list</span></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>run ?commands ?log_reporter app</code> is the main entry point to a Sihl app and starts the command line interface with <code>commands</code> merged with the commands provided by services.</p><p>An optional <code>log_reporter</code> can be provided to change the logging behavior. The default log reporter logs to stdout.</p></dd></dl><dl><dt class="spec value" id="val-run'"><a href="#val-run'" class="anchor"></a><code><span class="keyword">val</span> run' : <span>?&#8288;commands:<span><a href="../Core_command/index.html#type-t">Sihl__.Core_command.t</a> list</span></span> <span>&#45;&gt;</span> <span>?&#8288;log_reporter:Logs.reporter</span> <span>&#45;&gt;</span> <span>?&#8288;args:<span>string list</span></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>unit Lwt.t</span></code></dt><dd><p><code>run' ?commands ?log_reporter app</code> is analogous to <code>run</code>. It is a helper to be used in tests that need <code>Lwt.t</code>.</p></dd></dl></div></body></html>